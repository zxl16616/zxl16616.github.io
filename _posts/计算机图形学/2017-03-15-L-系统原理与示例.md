---
layout: post
comments: true
categories: 计算机图形学
---

### L-系统的原理及数学规则  
L-系统的原理本质上就是字符串的替代和重写。它的基本思想是先构造一个预定义的形状，然后再根据构造规则进行替换和重写，最后解释整个字符串的含义。下面一个例子简单的描述了L-系统的生成规则。  

假设有两个字符串a和b，设置初始条件为b，替换规则（1）为b→a，即为用字符串a来替换已存在的字符串中的b；替换规则（2）为a→ab，即为用字符串ab来替换字符串中的a。这样无限迭代下去，最终得到一个无限长度的由字符串a和字符串b组成的新字符串。如图1所示。
  
<center>
<img src="https://github.com/zxl16616/zxl16616.github.io/raw/master/_posts/pic/L-sys.png" alt="L-系统示例" width="30%" height="30%"> 
</center>  
<center>Figure 1. L-系统示例</center><br>  

上述的例子简要地说明了如何根据两条规则和一个初始条件，依据L-系统构建了一个新的字符串。
  
上述的过程可以通过以下形式化的定义描述：  
  
令V表示字母集，ω表示一个非空的单词（即为初始的字符串），P表示一个规则的合集，这里的产生规则记作a→x，即用x来替换现存字符串中的字母a，字母a和字母x分别叫做产生式的前驱和后继。对于每个a∈V，有且仅有一个非空的单词x，使得a→x，那么这个0L系统就称为D0L系统。
  
L-系统的执行过程是，先从起始字符串ω开始，将ω中的字符串作为迭代第0次的结果，然后再调用P规则集中的替代规则进行替换，修改迭代次数，生成第i次迭代的结果（i=0,1,2,3…）。  

公理：ω  
产生规则：P1：b→a  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P2：a→ab

最后根据每一个规则去替换现存字符串中的所有字符，生成最终字符串。  
<br> 


### L-系统的分类  
L-系统依据其生成方式不同，有几种不同的分类策略。首先，根据其生成规则的数量将其分为两种，第一种是单一规则的L-系统，第二种是多规则的L-系统。另一种分类是根据其产生式的前驱和后继的关系分为两种，第一种是确定性的L-系统，第二种是随机性的L-系统，这一小节通过一些简单的例子来说明这几种L-系统的分类方法。  
* 单一规则的L-系统  
单一规则的L-系统中仅有一条替换规则。例如画一棵草，字符串中的“F”表示草的枝干，字符“＋”、“－”表示树木枝干的生长方向，“[”、“]”代表分枝间的节点，用“[”来代表存储当前节点，字符“]”代表回到上一分枝节点。反复如此迭代，直到画出完整的分形草的形态。表1列出了一系列的分形树木的单一规则L-系统，对应的树木形态如图2所示。    
<center>  
Table 1. 单一规则L-系统
</center>
<center>  

对应的图例 | б | ω | P
----|------|----|----
图2(a) | 25°  | F | F→F[-F]F[+F]F
图2(b) | 25°  | F | F→F[+F]F[-F][F]
图2(c) | 25°  | F | F→F[+F]F[-F+F]
图2(d) | 25°  | F | F→F[-F][+F]F  
</center>  
<br>  


<center>
<img src="https://github.com/zxl16616/zxl16616.github.io/raw/master/_posts/pic/tree.png" alt="L-系统示例" width="60%" height="60%"> 
</center>  
<center>Figure 2. 一组单规则L-系统生成的植物形态</center><br>   

* 多规则的L-系统  
多规则L-系统指的是具有两条或两条以上的替换规则的L-系统。多规则L-系统具有两类情况，一类是表达式中的字母只作为被替换的对象而不做绘图操作，另一种是表达式中的字母不仅作为代替的字母，而且作为绘图对象被绘制。  
* 确定性L-系统  
确定性L-系统在本章第一小节已经描述过，令V表示一个字母集，ω表示一个非空的单词（即为初始的字符串），P表示一个规则的合集，这里的产生规则记作a→x，即用x来替换现存字符串中的字母a，字母a和字母x分别叫做产生式的前驱和后继。对于每个字母a∈V，如果有且仅有一个非空的字母x，使得a→x，那么这个0L系统就是D0L系统（确定性L-系统）。
* 随机性L-系统  
利用确定性L-系统生成的树木刻板，不生动。于是引入了随机性L-系统。随机性可以体现在描述在字符的方式上，例如随机的增长步长，随机的旋转角度等，也可以体现在替换规则的选择上，例如随机的应用多个替换式中的某一个。基于这样的随机L-系统生成的树木形态更加形象。  
* 参数L-系统  
参数L-系统把基本单词加上参数，并且加入了重写的方法。规定字符属于字符集V，参数属于参数集R，模块A(a1，a2，a3，a4…)是由字符集V和参数集R组成的，令R为所有有限参数的集合，那么所有的模块A都属于集合M=V×R。
出现在单词中的实参应该和L-系统规则中的形参一一对应。如果令Σ为形参的集合，令C(Σ)表示由这些形参组成的逻辑表达式，令ε(Σ)表示有这些形参组成的数学表达式。这些表达式既可以有参数也可以有常量。常用到的运算符号有数学中的＋、－、×、/和^，另外还包括逻辑运算符&&、||、！和关系运算符＜、＞、≤、≥、==等。

